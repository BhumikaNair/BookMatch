<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BookMatch</title>
    <link
      rel="icon"
      type="image/x-icon"
      href="{{ url_for('static', filename='favicon.ico') }}"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              accent: "#6366f1",
            },
            fontFamily: {
              sans: ["Inter", "system-ui", "sans-serif"],
            },
          },
        },
      };
    </script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      href="{{ url_for('static', filename='css/styles.css') }}"
      rel="stylesheet"
    />
  </head>
  <body
    class="bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 min-h-screen"
  >
    <header class="border-b border-gray-200 dark:border-gray-800">
      <div
        class="max-w-4xl mx-auto px-6 py-4 flex items-center justify-between"
      >
        <div class="cursor-pointer" onclick="bookFinder.goHome()">
          <img
            id="logoLight"
            src="{{ url_for('static', filename='images/logo_light.svg') }}"
            alt="BookMatch"
            class="h-8 dark:hidden"
          />
          <img
            id="logoDark"
            src="{{ url_for('static', filename='images/logo_dark.svg') }}"
            alt="BookMatch"
            class="h-8 hidden dark:block"
          />
        </div>
        <div class="flex items-center gap-2">
          <button
            id="themeToggle"
            class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md text-sm transition-colors"
            title="Toggle theme"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
          </button>
          <button
            id="historyToggle"
            class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md text-sm transition-colors"
            title="View history"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12,6 12,12 16,14"></polyline>
            </svg>
          </button>
        </div>
      </div>
    </header>

    <main class="max-w-4xl mx-auto px-6 py-12">
      <!-- Search Section -->
      <div class="text-center mb-12">
        <h2 class="text-3xl font-light mb-3">Find your next book</h2>
        <p class="text-gray-600 dark:text-gray-400 mb-8">
          Get AI-powered recommendations
        </p>

        <div class="relative max-w-md mx-auto">
          <input
            type="text"
            id="bookSearch"
            placeholder="Search books..."
            class="w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-accent/20 focus:border-accent text-sm"
          />
          <div
            id="searchSuggestions"
            class="absolute top-full left-0 right-0 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg mt-1 shadow-lg max-h-48 overflow-y-auto hidden z-10"
          ></div>
        </div>
      </div>

      <!-- Loading -->
      <div id="loadingIndicator" class="hidden text-center py-8">
        <div
          class="inline-block w-6 h-6 border-2 border-gray-300 border-t-accent rounded-full animate-spin"
        ></div>
      </div>

      <!-- Selected Book Info -->
      <div
        id="selectedBookInfo"
        class="hidden mb-8 flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg"
      ></div>

      <!-- Recommendations -->
      <div
        id="recommendationsList"
        class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-12"
      ></div>

      <!-- Popular Books -->
      <div id="popularBooksSection">
        <h3 class="text-lg font-medium mb-6 text-center">Discover</h3>
        <div
          id="popularBooksList"
          class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"
        ></div>
      </div>
    </main>

    <!-- Minimal History Sidebar -->
    <div
      id="historySidebar"
      class="fixed right-0 top-0 h-full w-72 bg-white dark:bg-gray-950 border-l border-gray-200 dark:border-gray-800 transform translate-x-full transition-transform duration-200 z-40 overflow-y-auto"
    >
      <div class="p-6">
        <div class="flex items-center justify-between mb-6">
          <h3 class="font-medium">Recent</h3>
          <button
            id="closeHistory"
            class="p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded text-sm"
          >
            ×
          </button>
        </div>
        <div id="historyList" class="space-y-2"></div>
        <button
          id="clearHistory"
          class="w-full mt-4 px-3 py-2 text-sm bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md transition-colors"
        >
          Clear
        </button>
      </div>
    </div>

    <!-- Minimal Modal -->
    <div
      id="bookModal"
      class="fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50 hidden p-4"
    >
      <div
        class="bg-white dark:bg-gray-950 rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto border border-gray-200 dark:border-gray-800"
      >
        <div class="flex justify-between items-center mb-4">
          <h3 class="font-medium">Book Details</h3>
          <button
            id="closeModal"
            class="p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded text-sm"
          >
            ×
          </button>
        </div>
        <div id="modalContent"></div>
      </div>
    </div>

    <!-- Overlay -->
    <div
      id="sidebarOverlay"
      class="fixed inset-0 bg-black/10 z-30 hidden"
    ></div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="fixed top-4 right-4 space-y-2 z-50"></div>

    <script src="{{ url_for('static', filename='js/minimal-app.js') }}"></script>
  </body>
</html>
